$web-bookmarks: true !default;
@if $web-bookmarks {

    // Bookmarks

    // The bookmarks list
    .bookmarks {
        z-index: 100;
        padding: 0.55em; // aligns beneath language selector
        text-align: right;
        color: $bookmark-text-color;
        .bookmarks-list {
            list-style-type: none;
            padding: 0; // override default masthead padding
            li {
                display: block; // overrides masthead ul styles
                a {
                    color: $bookmark-text-color;
                }
                // override inherited styles from masthead ul li:after
                &:after {
                    content: normal;
                }
                svg {
                    display: inline-block;
                    height: 0.75em;
                    margin-left: 0.5em;
                    width: 0.75em;
                    path {
                        fill: $bookmark-icon-color-active;
                    }
                }
            }
        }
        // Hide history icon here, we need it elsewhere, e.g. for JS
        .history-icon {
            display: none;
        }
        // Hide the list till hover on parent
        .bookmarks-list {
            display: none;
        }
        &:hover {
            .bookmarks-list {
                @include dialog-styles();
                display: inline;
                position: fixed;
                right: 0.5em;
                &:empty {
                    display: none;
                }
            }
        }
    }

    // Icons (_includes/bookmark-icon, _includes/history-icon)
    svg[class*="icon"] {
        // Avoid Firefox bug where tapping selects SVG as text
        // https://bugzilla.mozilla.org/show_bug.cgi?id=1286882
        -moz-user-select: none;
        &.bookmark-icon {
            path {
                fill: $bookmark-icon-color-inactive;
            }
        }
        &.history-icon {
            path {
                fill: $bookmark-icon-color-inactive;
            }
        }
    }

    // Bookmark button
    .bookmark-button {
        background: none;
        border: none;
        padding: 0.333em;
        position: absolute; // avoids messing up line-height
        svg {
            width: 1em;
            height: 1em;
        }
        &:hover,
        &:focus,
        &:active {
            background-color: transparent;
            svg {
                path {
                    fill: $bookmark-icon-color-active;
                }
            }
        }
    }
    // Manage visibility of bookmark buttons
    [data-bookmark="offscreen"] {
        .bookmark-button {
            display: none;
        }
    }
    [data-bookmark="onscreen"],
    * [data-bookmark="onscreen"] {
        // Hide all subsequent bookmark buttons...
        & ~ [data-bookmark="onscreen"],
        & ~ * [data-bookmark="onscreen"] {
            .bookmark-button {
                display: none;
            }
            // ...unless they are bookmarked
            &[data-bookmarked] {
                .bookmark-button {
                    display: inline;
                }
            }
            // or hovered over
            &:hover,
            &:active,
            &:focus {
                .bookmark-button {
                    display: inline;
                }
            }
        }
    }

    // Bookmarkable elements
    [data-bookmarked] {
        svg[class*="icon"].bookmark-icon {
            path {
                fill: $bookmark-icon-color-active;
            }
        }
    }
}
